## 테이블 간의 관계(Foreign key 제약조건)
- Foreign key
  - 한 테이블이 다른 테이블의 값을 참조하는 것
- 부모테이블 : 참조 되는 테이블
- 자식테이블 : 참조 하는 테이블

### 관계 읽기
- `-------`(실선) : fk, pk이면 실선!(식별키)
- `- - - -`(점선) : fk일 때면 점선!(비식별키)
- `- -|- -` : 1개를 참조
- `- -O|- -` : 0, 1개 참조
- `- -|K- -` : 1 ~ n개 참조
- `- -OK- -` : 0 ~ n개 참조
- `- -O|K- -` : 0 ~ n개 참조

### 설계도 읽기!
- `직원` = 자식 테이블, `부서` = 부모테이블(Primary key와 Foreign key확인)
- `부서`(부모)의 Primary key를 `직원`(자식) Foreign key로 받아 `부서`테이블 참조 사용
- `부서`테이블은 `직원`테이블의 0 ~ n개 참조 가능
- `직원`테이블의 `직원_id`(Primary key)는 `상사_id`(Foreign key)로 참조
![join_table](https://user-images.githubusercontent.com/77317312/106538500-ac1f2780-653f-11eb-9375-20f58d846d0b.PNG)


## foreign key 제약조건
- 자식 컬럼에 지정
    - 기본 구문
          - `constraint 제약조건이름 foreign key(컬럼) refereces 부모테이블([pk컬럼])`
    - `on delete set null` : 부모테이블의 값이 지워지면 참조하는 애들을 전부 null로 만든다.
        - 지울 수 있다.
    - `on delete set null 지정 X` : 부모테이블의 값을 지울수 없다.
    - `on delete cascade` : 부모테이블의 값이 지워지면 참조하는 애들의 값을 날리는 것 
```sql          
constraint fk_emp_dept foreign key(dept_id) rereference dept(dept_id) on delete set null
```    
- 자식 테이블로부터 참조 당하는 부모 테이블의 row는 삭제 할 수 없다.

# 설계도 읽기 연습
![설계도](https://user-images.githubusercontent.com/77317312/106829189-fe428300-66ce-11eb-84a9-cca656045825.PNG)
1. 제품 테이블은 제품_ID 컬럼이 `[PRIMARY KEY]` 컬럼으로 그 행을 다른 행과 식별할 때 사용된다.
2. 제품 테이블의 제조사 컬럼은 Not Null(NN) 인 것으로 봐서 `[NULL]` 인 상태일 수가 없다.
3. 고객 테이블에서 다른행과 식별할 때 사용하는 컬럼은 `[CUST_ID]` 이다. 
4. 고객 테이블의 전화번호 컬럼의 데이터 타입은 `[VARCHAR2]` 으로 `[문자열]`형태의 값 `[15]`바이트 저장할 수 있으며 NULL 값을 `[포함한다]`.
5. 고객 테이블의 가입일 컬럼에 대해 4번 처럼 설명해 보시오.
    - 고객 테이블의 가입일 컬럼의 데이터 타입은 `[DATE]` 로 `[날짜/시간]`형태의 값 null값을 포함하지 않는다.
6. 주문 테이블은 총 5개 컬럼이 있다. 정수 타입이 `[3]`개이고 문자열 타입이 `[1]`개 이고 날짜 타입이 `[1]`개이다.
7. 고객 테이블과 주문테이블은 서로 관계가 있는 테이블입니다.
    부모테이블은`[고객테이블(CUSTOMERS)]` 이고 자식 테이블은 `[주문테이블(ORDERS)]`이다.
    부모테이블의 `[CUST_ID]`컬럼을 자식테이블의 `[CUST_ID]`컬럼이 참조하고 있다.
    고객테이블의 한행의 데이터는 주문테이블의 `[0 ~ n개]` 행과 관계가 있을 수 있다.
    주문테이블의 한행은 고객테이블의 `[ 1 ]`행과 관계가 있을 수 있다.
8. 주문 테이블과 주문_제품 테이블은 서로 관계가 있는 테이블입니다.
    부모 테이블은 `[ORDERS]` 이고 자식 테이블은 `[ORDER_ITEMS]`이다.
    부모 테이블의 `[ORDER_ID]`컬럼을 자식 테이블의 `[ORDER_ID]`컬럼이 참조하고 있다.
    주문 테이블의 한행의 데이터는 주문_제품 테이블의 `[0~n개]` 행과 관계가 있을 수 있다.
    주문_제품 테이블의 한행은 주문 테이블의 `[ 1 ]`행과 관계가 있을 수 있다.
9. 제품과 주문_제품은 서로 관계가 있는 테이블입니다. 
    부모 테이블은 `[PRODUCTS]` 이고 자식 테이블은 `[ORDER_ITEMS]`이다.
    부모 테이블의 `[PRODUCT_ID]`컬럼을 자식 테이블의 `[PRODUCT_ID]`컬럼이 참조하고 있다.
    제품 테이블의 한행의 데이터는 주문_제품 테이블의 `[0 ~ n개]` 행과 관계가 있을 수 있다.
    주문_제품 테이블의 한행은 제품 테이블의 `[ 1 ]`행과 관계가 있을 수 있다.
